@{
    ViewData["Title"] = "Restaurant Map";
}

<div class="text-center mb-4">
    <h1>@ViewData["Title"]</h1>
    <p>Find our restaurant location and get directions</p>
</div>

<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Restaurant Location</h5>
            </div>
            <div class="card-body p-0">
                <!-- Interactive Map Container -->
                <div id="map" style="height: 400px; width: 100%;"></div>
            </div>
            <div class="card-footer">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Address:</h6>
                        <p class="mb-1">123 Main Street</p>
                        <p class="mb-1">Downtown, City 12345</p>
                        <p class="mb-0">Phone: (555) 123-4567</p>
                    </div>
                    <div class="col-md-6">
                        <h6>Hours:</h6>
                        <p class="mb-1">Mon-Thu: 11:00 AM - 10:00 PM</p>
                        <p class="mb-1">Fri-Sat: 11:00 AM - 11:00 PM</p>
                        <p class="mb-0">Sunday: 12:00 PM - 9:00 PM</p>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="https://www.google.com/maps/dir/?api=1&destination=123+Main+Street,Downtown,City" 
                       target="_blank" class="btn btn-primary">
                        <i class="fas fa-directions"></i> Get Directions
                    </a>
                    <button class="btn btn-outline-secondary" onclick="shareLocation()">
                        <i class="fas fa-share"></i> Share Location
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <!-- Leaflet CSS and JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    
    <script>
        // Initialize the map
        var map = L.map('map').setView([40.7128, -74.0060], 15); // Default to NYC coordinates
        
        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);
        
        // Add a marker for the restaurant
        var restaurantMarker = L.marker([40.7128, -74.0060]).addTo(map);
        
        // Add popup to the marker
        restaurantMarker.bindPopup(`
            <div class="text-center">
                <h6>Our Restaurant</h6>
                <p>123 Main Street<br>Downtown, City 12345</p>
                <small>Click for directions</small>
            </div>
        `).openPopup();
        
        // Function to share location
        function shareLocation() {
            if (navigator.share) {
                navigator.share({
                    title: 'Restaurant Location',
                    text: 'Check out our restaurant location!',
                    url: window.location.href
                }).catch(console.error);
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(window.location.href).then(function() {
                    alert('Location link copied to clipboard!');
                }).catch(function() {
                    alert('Unable to copy link. Please share manually: ' + window.location.href);
                });
            }
        }
        
        // Add click event to marker for directions
        restaurantMarker.on('click', function() {
            window.open('https://www.google.com/maps/dir/?api=1&destination=40.7128,-74.0060', '_blank');
        });
    </script>
}